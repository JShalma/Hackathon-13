<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formelle | Personalized Ingredient Checker</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind config: Times New Roman + Formelle palette -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              formelle: ['"Times New Roman"', 'Times', 'serif'],
            },
            colors: {
              formelle: {
                bg: '#f5f7f4',           // soft light background
                card: '#ffffff',         // white cards
                sage: '#A8CBB4',         // soft sage
                sageSoft: '#E4F0E9',     // pale sage background
                forest: '#1B4332',       // deep forest green
                text: '#111827',         // main text
                muted: '#6b7280',        // muted gray text
                border: '#d4e3d8',       // subtle sage border
              },
            },
            boxShadow: {
              soft: '0 16px 40px rgba(15,23,42,0.08)',
            },
            borderRadius: {
              xl2: '20px',
            },
          },
        },
      }
    </script>

    <!-- Minimal custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="font-formelle bg-formelle-bg text-formelle-text min-h-screen">

    <!-- NAVBAR -->
    <header class="sticky top-0 z-20 bg-white/95 border-b border-formelle-border shadow-sm">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-7 h-7 rounded-full bg-formelle-sageSoft flex items-center justify-center border border-formelle-sage">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#1B4332" viewBox="0 0 16 16">
                        <path d="M4.5 0a.5.5 0 0 0 0 1H5v5.36L.503 13.717A1.5 1.5 0 0 0 1.783 16h12.434a1.5 1.5 0 0 0 1.28-2.282L11 6.359V1h.5a.5.5 0 0 0 0-1zM10 2H9a.5.5 0 0 0 0 1h1v1H9a.5.5 0 0 0 0 1h1v1H9a.5.5 0 0 0 0 1h1.22l.61 1H10a.5.5 0 1 0 0 1h1.442l.611 1H11a.5.5 0 1 0 0 1h1.664l.611 1H12a.5.5 0 1 0 0 1h1.886l.758 1.24a.5.5 0 0 1-.427.76H1.783a.5.5 0 0 1-.427-.76l4.57-7.48A.5.5 0 0 0 6 6.5V1h4z"/>
                    </svg>
                </div>
                <span class="font-semibold italic tracking-wide text-formelle-text text-base">
                    Formelle
                </span>
            </div>
            <span class="hidden sm:block text-[0.7rem] text-formelle-muted">
                <span class="font-semibold italic">Formelle</span> — Beauty, decoded by science.
            </span>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        <section class="grid md:grid-cols-2 gap-8 items-start">

            <!-- LEFT: HERO / EXPLANATION -->
            <div class="space-y-4">
                <h1 class="text-3xl md:text-4xl font-semibold leading-snug text-formelle-text">
                    Gentle, clear insight into what you’re really putting on your skin.
                </h1>

                <p class="text-sm text-formelle-muted">
                    <span class="font-semibold italic">Formelle</span> tailors ingredient analysis to you:
                    acne-prone, sensitive skin, anti-aging, hyperpigmentation, fragrance sensitivity,
                    and environmental impact — all translated into simple, elegant insights.
                </p>

                <!-- Soft sage info card -->
                <div class="bg-formelle-sageSoft/80 border border-formelle-border rounded-xl2 p-4 shadow-soft space-y-2">
                    <h2 class="text-sm font-semibold text-formelle-forest">How it works</h2>
                    <ol class="list-decimal list-inside text-[0.8rem] text-formelle-muted space-y-1">
                        <li>Select your concerns so we know what to look for.</li>
                        <li>Paste a full ingredient list or add ingredients individually.</li>
                        <li>Our backend checks against a curated chemical database and flags what aligns or conflicts with your profile.</li>
                    </ol>
                    <p class="text-[0.7rem] text-formelle-muted/90">
                        Prototype • Educational only • Not medical or regulatory advice.
                    </p>
                </div>

                <div class="text-[0.7rem] text-formelle-muted">
                    Future: AI-powered ingredient parsing, personalized scoring, localized product databases,
                    and clean alternatives — all under the <span class="font-semibold italic">Formelle</span> ecosystem.
                </div>
            </div>

            <!-- RIGHT: FORM -->
            <div>
                <form action="/chemicals" method="POST"
                      class="bg-formelle-card border border-formelle-border rounded-xl2 p-5 shadow-soft space-y-4">

                    <!-- CONCERNS -->
                    <div>
                        <h2 class="text-sm font-semibold text-formelle-text mb-1">
                            Your concerns
                        </h2>
                        <p class="text-[0.7rem] text-formelle-muted mb-2">
                            Choose what we should prioritize when we analyze your product.
                        </p>
                        <div class="grid grid-cols-2 gap-2 text-[0.75rem] text-formelle-text">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="concerns" value="acne"
                                       class="w-3 h-3 accent-formelle-forest">
                                <span>Acne-prone</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="concerns" value="sensitive_skin"
                                       class="w-3 h-3 accent-formelle-forest">
                                <span>Sensitive skin</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="concerns" value="anti_aging"
                                       class="w-3 h-3 accent-formelle-forest">
                                <span>Anti-aging / fine lines</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="concerns" value="hyperpigmentation"
                                       class="w-3 h-3 accent-formelle-forest">
                                <span>Hyperpigmentation</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="concerns" value="fragrance_free"
                                       class="w-3 h-3 accent-formelle-forest">
                                <span>Fragrance-sensitive</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="concerns" value="eco"
                                       class="w-3 h-3 accent-formelle-forest">
                                <span>Lower environmental impact</span>
                            </label>
                        </div>
                    </div>

                    <!-- PRODUCT NAME -->
                    <div>
                        <label for="product_name"
                               class="block text-[0.7rem] text-formelle-muted mb-1">
                            Product name (optional)
                        </label>
                        <input
                            id="product_name"
                            name="product_name"
                            type="text"
                            placeholder="e.g. Gentle Glow Cleanser"
                            class="w-full px-3 py-2 rounded-lg border border-formelle-border text-[0.8rem] text-formelle-text bg-white focus:outline-none focus:border-formelle-forest focus:ring-1 focus:ring-formelle-sage"
                        />
                    </div>

                    <!-- PASTE FULL INGREDIENTS -->
                    <div>
                        <label for="ingredients_text"
                               class="block text-[0.7rem] text-formelle-muted mb-1">
                            Paste full ingredient list
                        </label>
                        <textarea
                            id="ingredients_text"
                            name="ingredients_text"
                            rows="4"
                            placeholder="Example: Water, Niacinamide, Glycerin, Fragrance, Citric Acid..."
                            class="w-full px-3 py-2 rounded-lg border border-formelle-border text-[0.8rem] text-formelle-text bg-white focus:outline-none focus:border-formelle-forest focus:ring-1 focus:ring-formelle-sage resize-y"
                        ></textarea>
                        <p class="text-[0.65rem] text-formelle-muted mt-1">
                            If you don’t have the full list, add known ingredients below.
                        </p>
                    </div>

                    <!-- INDIVIDUAL INGREDIENTS -->
                    <div>
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-[0.7rem] text-formelle-muted">
                                Individual ingredients
                            </span>
                            <button type="button"
                                    onclick="addIngredientInput()"
                                    class="text-[0.7rem] px-3 py-1 rounded-full border border-formelle-sage text-formelle-forest bg-formelle-sageSoft hover:bg-formelle-sage transition">
                                + Add ingredient
                            </button>
                        </div>
                        <div id="input-container" class="space-y-2"></div>
                    </div>

                    <!-- SUBMIT -->
                    <div class="pt-1">
                        <button type="submit"
                                class="w-full py-2.5 rounded-full bg-formelle-forest text-white text-sm font-semibold hover:bg-emerald-900 transition shadow-sm">
                            Analyze my product
                        </button>
                        <p class="text-[0.65rem] text-formelle-muted mt-2">
                            We send your concerns, product name, pasted list, and added ingredients to the backend
                            for analysis against the <span class="font-semibold italic">Formelle</span> database.
                        </p>
                    </div>
                </form>
            </div>
        </section>
        <section>
            {% block chemicals %}
            {% endblock %}
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="mt-4 pb-6 text-center text-[0.65rem] text-formelle-muted">
        © 2025 <span class="font-semibold italic">Formelle</span> — Beauty, decoded by science.
    </footer>

    <!-- JS: Dynamic ingredient input fields -->
    <script>
        function addIngredientInput() {
            const container = document.getElementById("input-container");

            const row = document.createElement("div");
            row.className = "flex items-center gap-2";

            const input = document.createElement("input");
            input.type = "text";
            input.name = "ingredients";
            input.placeholder = "e.g. Niacinamide";
            input.className =
                "flex-1 px-3 py-2 rounded-lg border border-formelle-border text-[0.8rem] text-formelle-text bg-white focus:outline-none focus:border-formelle-forest focus:ring-1 focus:ring-formelle-sage";

            const removeBtn = document.createElement("button");
            removeBtn.type = "button";
            removeBtn.textContent = "✕";
            removeBtn.className =
                "text-[0.65rem] px-2 py-1 rounded-full border border-formelle-border text-formelle-muted hover:bg-red-100 hover:text-red-500 transition";
            removeBtn.onclick = () => row.remove();

            row.appendChild(input);
            row.appendChild(removeBtn);
            container.appendChild(row);
        }

        // Start with one ingredient row visible
        addIngredientInput();
    </script>

</body>
</html>